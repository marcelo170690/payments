import{az as U,at as c,aA as N,o as l,c as m,k as n,z as r,a as d,v as u,w as i,j as g,N as x,A as _,K as w,O as V,aC as k}from"./index-Cj-k1PN7.js";import{b as C,c as q,f as z,I as A}from"./config-B2qi-ZB6.js";import{s as L,a as O}from"./index-hN2dFyDU.js";import{s as b}from"./index-B2sqpUK9.js";import{a as B}from"./index-DB_-vnPU.js";import"./index-CEaFRDN1.js";const G={key:0,class:"card mt-10"},K={class:"flex flex-col items-center gap-4 mb-2"},M={class:"flex flex-col justify-center items-center"},R={key:1,class:"card flex justify-center"},H={class:"flex flex-col justify-center items-center gap-4 mb-2"},J={class:"flex flex-col justify-center items-center gap-4 mb-2"},Q={class:"flex flex-col justify-center items-center gap-4 mb-2"},W={class:"flex flex-col justify-center items-center gap-4 mb-2"},le={__name:"NewPayment",setup(X){const p=U(),D=c(!1),h=c(null),$=c(null),j=c([]),v=c(!1),y=c(!1);c(!1);const e=N({service:"",payment:"",amount:0}),a=N({service:[],payment:[],amount:[]}),P=()=>{console.log(e),e.service||a.service.push({type:"required",content:"Debe seleccionar un servicio"}),e.payment||a.payment.push({type:"required",content:"Debe agregar un titulo para el pago"}),e.payment.length<=5&&e.payment.length>=30&&a.amount.push({type:"minimum",content:"Debe agregar un titulo entre 5 y 30 caracteres"}),parseFloat(e.amount)<0&&a.amount.push({type:"minimum",content:"El monto debe ser mayor a 0"});for(let o in a)if(a[o].length>0)return!1;return!0},F=()=>{for(let o in a)a[o]=[]},I=()=>{e.service="",e.payment="",e.amount=0},S=async()=>{try{y.value=!0;const o=await z.listDocuments("672ad95700261cb70729","672ad9ea002421a0212f");console.log(o.documents),j.value=o.documents,y.value=!1}catch(o){y.value=!1,console.log(o)}},E=async()=>{F();const o=P();try{if(!o){p.add({severity:"warn",summary:"Datos Invalidos.",life:3e3});return}v.value=!0;const t=await z.createDocument("672ad95700261cb70729","672ada50002119b910b9",A.unique(),{service:e.service,title:e.payment,status:!0,amount:parseFloat(e.amount),currency:"BOB"});console.log(t),I(),p.add({severity:"success",summary:"Se guardo el pago exitosamente.",life:3e3}),v.value=!1}catch(t){v.value=!1,console.log(t),p.add({severity:"error",summary:"No se pudo guardar.",life:3e3}),console.log(t)}},T=()=>{if(h.value!=="marcelo@"){p.add({severity:"warn",summary:"Contraseña Inválida.",life:3e3});return}p.add({severity:"success",summary:"Contraseña Correcta.",life:3e3}),D.value=!0,S()};return(o,t)=>(l(),m(x,null,[n(r(L)),D.value?(l(),m("div",R,[n(r(O),{style:{width:"25rem"}},{content:i(()=>[d("div",H,[n(r(q),{modelValue:e.service,"onUpdate:modelValue":t[1]||(t[1]=s=>e.service=s),options:j.value,optionLabel:"title",optionValue:"$id",placeholder:"Services",class:"w-full md:w-56",loading:y.value},null,8,["modelValue","options","loading"]),a.service.length>0?(l(),u(k,{key:0,name:"p-message",tag:"div",class:"flex flex-col"},{default:i(()=>[(l(!0),m(x,null,V(a.service,(s,f)=>(l(),u(r(b),{key:`error-service-${f}`,severity:"error",size:"small",variant:"simple"},{default:i(()=>[_(w(s.content),1)]),_:2},1024))),128))]),_:1})):g("",!0)]),d("div",J,[n(r(C),{modelValue:e.payment,"onUpdate:modelValue":t[2]||(t[2]=s=>e.payment=s),placeholder:"Título Pago",class:"w-full md:w-56"},null,8,["modelValue"]),a.payment.length>0?(l(),u(k,{key:0,name:"p-message",tag:"div",class:"flex flex-col"},{default:i(()=>[(l(!0),m(x,null,V(a.payment,(s,f)=>(l(),u(r(b),{key:`error-payment-${f}`,severity:"error",size:"small",variant:"simple"},{default:i(()=>[_(w(s.content),1)]),_:2},1024))),128))]),_:1})):g("",!0)]),d("div",Q,[n(r(C),{modelValue:e.amount,"onUpdate:modelValue":t[3]||(t[3]=s=>e.amount=s),placeholder:"Monto del Pago",class:"w-full md:w-56",type:"number"},null,8,["modelValue"]),a.amount.length>0?(l(),u(k,{key:0,name:"p-message",tag:"div",class:"flex flex-col"},{default:i(()=>[(l(!0),m(x,null,V(a.amount,(s,f)=>(l(),u(r(b),{key:`error-amount-${f}`,severity:"error",size:"small",variant:"simple"},{default:i(()=>[_(w(s.content),1)]),_:2},1024))),128))]),_:1})):g("",!0)]),d("div",W,[n(r(B),{loading:v.value,loadingIcon:"pi pi-spinner pi-spin",type:"submit",severity:"primary",label:"Registrar",class:"w-full md:w-56",onClick:E},null,8,["loading"])])]),_:1})])):(l(),m("div",G,[d("div",K,[n(r(C),{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=s=>h.value=s),placeholder:"Contraseña",class:"w-1/2"},null,8,["modelValue"]),$.value?(l(),u(r(b),{key:0,severity:"error",size:"small",variant:"simple"},{default:i(()=>[_(" * "+w($.value),1)]),_:1})):g("",!0)]),d("div",M,[n(r(B),{severity:"primary",label:"Verificar",class:"w-1/2",onClick:T})])]))],64))}};export{le as default};
